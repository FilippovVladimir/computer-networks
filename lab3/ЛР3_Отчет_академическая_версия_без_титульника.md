
# ЛАБОРАТОРНАЯ РАБОТА №3  
## Изучение работы концентраторов и коммутаторов. Организация виртуальных сетей. DHCP‑сервер

# ВВЕДЕНИЕ

Целью выполнения данной лабораторной работы является практическое изучение принципов функционирования концентраторов (hub) и коммутаторов второго уровня (switch) в компьютерных сетях, а также освоение настройки виртуальных локальных сетей (VLAN) и DHCP‑сервера для автоматической выдачи IP‑адресов.

В ходе работы необходимо:

- исследовать поведение концентратора при передаче кадров;
- проанализировать возникновение коллизий;
- реализовать сегментацию сети с использованием VLAN;
- организовать межвлановую маршрутизацию;
- настроить DHCP‑сервер для автоматического назначения IP‑адресов устройствам.

# 1. ТЕСТИРОВАНИЕ РАБОТЫ КОНЦЕНТРАТОРА В CISCO PACKET TRACER

В среде Cisco Packet Tracer был создан новый проект, в котором размещён концентратор (hub), подключённый к шести персональным компьютерам.

Концентратор функционирует на физическом уровне модели OSI и передаёт входящий сигнал на все остальные порты без анализа MAC‑адресов. Таким образом, любое устройство в сети получает копию передаваемого кадра.

Пример передачи пакета от PC0 к PC3 представлен ниже.

![Рисунок 1.1 — Передача пакета через хаб](fig1_1_hub_packet.png)  
*Описание: отправка пакета от одного компьютера к другому через концентратор.*

Так как концентратор не выполняет фильтрацию трафика, при одновременной передаче данных несколькими устройствами возникают коллизии.

Пример одновременной отправки двух пакетов показан ниже.

![Рисунок 1.2 — Коллизия при работе хаба](fig1_2_collision.png)  
*Описание: столкновение двух кадров при одновременной передаче.*

На физическом уровне можно наблюдать состояние столкнувшихся пакетов.

![Рисунок 1.3 — Состояние пакета у хаба](fig1_3_collision_state_hub.png)  
*Описание: отображение коллизии в окне симуляции.*

![Рисунок 1.4 — Состояние пакета у получателя](fig1_4_collision_state_target.png)  
*Описание: влияние коллизии на конечное устройство.*

Таким образом, концентратор не способен предотвращать коллизии, поскольку вся сеть образует единый домен коллизий.

# 2. ОРГАНИЗАЦИЯ И МОДЕЛИРОВАНИЕ ВИРТУАЛЬНЫХ СЕТЕЙ

В данной части работы использовалась модифицированная схема из предыдущей лабораторной. Вместо простых подсетей были добавлены устройства различных типов:

- персональные компьютеры;
- сетевые принтеры;
- IP‑телефоны;
- веб‑камеры.

Для сегментации сети были настроены VLAN с адресными пространствами:

10.10.0.0/24  
10.20.0.0/24  
10.30.0.0/24  
10.40.0.0/24  
10.60.0.0/24  

Общая схема представлена ниже.

![Рисунок 2.1 — Общая схема сети](fig2_1_network_scheme.png)  
*Описание: топология сети с несколькими VLAN и коммутаторами.*

На каждом коммутаторе были созданы VLAN 10, 20, 30, 40 и 60. После этого соответствующие порты были переведены в режим access и назначены конкретным VLAN.

Пример конфигурации интерфейсов:

```
interface FastEthernet0/1
switchport mode access
switchport access vlan 10
```

Настройка показана ниже.

![Рисунок 2.2 — Настройка портов коммутатора](fig2_2_switch_config.png)  
*Описание: назначение VLAN на интерфейсы коммутатора.*

Для IP‑телефонов использовалась особая конфигурация, так как им требуется voice VLAN.

```
switchport voice vlan 30
switchport access vlan 1
```

Пример показан ниже.

![Рисунок 2.3 — Настройка порта для IP‑телефона](fig2_3_voice_vlan.png)  
*Описание: конфигурация voice VLAN.*

Созданные VLAN были проверены командой:

```
show vlan brief
```

![Рисунок 2.4 — Проверка VLAN](fig2_4_show_vlan.png)  
*Описание: список созданных VLAN на коммутаторе.*

Аналогичные действия выполнены на остальных коммутаторах.

Передача пакетов внутри одной VLAN проходит успешно.

![Рисунок 2.5 — Передача внутри VLAN](fig2_5_vlan_communication.png)  
*Описание: устройства одной VLAN успешно взаимодействуют.*

Попытка передачи данных между VLAN 10 и VLAN 20 без маршрутизации приводит к неудаче.

![Рисунок 2.6 — Отсутствие связи между VLAN](fig2_6_no_intervlan.png)  
*Описание: отсутствие межвлановой маршрутизации.*

Для решения проблемы был использован коммутатор третьего уровня (multilayer switch). Были созданы виртуальные интерфейсы (SVI):

```
interface vlan 10
ip address 10.10.0.1 255.255.255.0
no shutdown
```

![Рисунок 2.7 — Создание SVI](fig2_7_svi.png)  
*Описание: настройка виртуального интерфейса VLAN.*

Порт, соединяющий коммутаторы, был переведён в режим trunk:

```
switchport mode trunk
switchport trunk allowed vlan 10,20,30,40,60
```

![Рисунок 2.8 — Настройка trunk](fig2_8_trunk.png)  
*Описание: включение trunk‑режима.*

После этого была активирована маршрутизация:

```
ip routing
```

# НАСТРОЙКА DHCP

Первоначально была предпринята попытка раздачи адресов через multilayer switch путём создания DHCP‑пула.

```
ip dhcp pool voice
network 10.30.0.0 255.255.255.0
default-router 10.30.0.1
```

![Рисунок 2.9 — DHCP на коммутаторе](fig2_9_dhcp_switch.png)  
*Описание: конфигурация DHCP‑пула на L3‑коммутаторе.*

Выданные адреса проверялись командой:

```
show ip dhcp binding
```

![Рисунок 2.10 — Проверка выдачи адресов](fig2_10_dhcp_binding.png)  
*Описание: список назначенных IP‑адресов.*

После этого DHCP‑пул был удалён, и в сеть был добавлен выделенный DHCP‑сервер.

Серверу был назначен адрес 10.60.0.2, а шлюз — 10.60.0.1.

![Рисунок 2.11 — Настройка сервера](fig2_11_server_config.png)  
*Описание: конфигурация IP‑параметров сервера.*

На сервере были созданы четыре DHCP‑пула для соответствующих VLAN.

![Рисунок 2.12 — DHCP‑пулы сервера](fig2_12_server_pools.png)  
*Описание: параметры пулов для различных VLAN.*

Интерфейс, подключённый к серверу, был переведён в access VLAN 60.

![Рисунок 2.13 — Порт сервера](fig2_13_server_port.png)  
*Описание: назначение VLAN серверному порту.*

На SVI были добавлены команды ip helper-address:

```
ip helper-address 10.60.0.2
```

![Рисунок 2.14 — Конфигурация SVI](fig2_14_running_config.png)  
*Описание: вывод running-config с ip helper-address.*

После перевода устройств в режим получения IP по DHCP они получили корректные адреса и шлюзы.

![Рисунок 2.15 — Полученные IP‑адреса](fig2_15_dhcp_result.png)  
*Описание: автоматическое назначение IP‑адресов устройствам.*

# ЗАКЛЮЧЕНИЕ

В ходе выполнения лабораторной работы была исследована работа концентратора и продемонстрированы коллизии в едином домене. Также была реализована сегментация сети с использованием VLAN, настроена межвлановая маршрутизация на коммутаторе третьего уровня и организована автоматическая выдача IP‑адресов посредством DHCP‑сервера.

Поставленные цели работы достигнуты: изучены принципы работы устройств второго уровня, освоена организация виртуальных сетей и выполнена настройка DHCP.
